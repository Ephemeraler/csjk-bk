# 报警管理
## 活跃事件和报警
### 前置条件: 
1) 数据来源统一, 所有事件与报警汇聚点为 Alertmanager, 均存储在 PG.Alert 表中;
2) 必须报警标签:
   1) 报警来源, 继续采用 source 标签, 取值范围["inband", "outband", "event"];
   2) 严重程度, 继续采用 severity 标签, 根据不同 source 标签, 解释 severity; 

### 使用方式
1. 分屏显示
   分屏显示时每个屏中的数据及报警类别统计数据对应一个API请求, 如带外报警 GET /api/v1/alerts/firing?filter=source=outband&page=&page_size=
2. 不分屏显示
   不分屏显示时, 无需传递参数 filter. 示例: GET /api/v1/alerts/firing?page=&page_size= 即可.

## 历史事件和报警
### 前置条件:
1) 数据来源统一, 所有事件与报警汇聚点为 Alertmanager, 均存储在 PG.Alert 相关表中;
2) 前端使用的标签名与标签对应值返回应该与报警内容信息保持一致或者能够唯一映射;

### API 设计方案
为充分保证可扩展性, 避免前端更改初始设定的筛选条件面板内容, 已经后端标签名称更改. 要精心设计后端 API 参数.

总的来说, 筛选报警信息的条件就来自三个表: Alert, Alertlabel, Alertannotation. 其中, Alert 字段名称与报警字段信息对应且确定, 其余2表均采用扩展性设计.

```json
{
   "alert": {
      "status": "",
      "startsat": "",
      "endsat": "",
   },
   // 不同标签之间是 and 
   "labels": {
      "<key1>": ["value1", "value2", ...],
      "<key2>": ["value1", "value2", ...],
   },
   // 不同标签之间是 and.
   "annotations": {
      "<key1>": ["value1", "value2", ...], // 不同值之间是 or
      "<key2>": ["value1", "value2", ...],
   }
}
```

### 使用方式
